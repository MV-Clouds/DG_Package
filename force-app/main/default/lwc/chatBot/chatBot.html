<template>
    <div class="container">
        <template if:false={popupOpen}>
            <div if:true={hideCircle} class="hidden-bot" onclick={toggleCircle}>
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="grey" height="15" width="15" version="1.1" viewBox="0 0 330 330" xml:space="preserve">
                    <path d="M325.606,229.393l-150.004-150C172.79,76.58,168.974,75,164.996,75c-3.979,0-7.794,1.581-10.607,4.394  l-149.996,150c-5.858,5.858-5.858,15.355,0,21.213c5.857,5.857,15.355,5.858,21.213,0l139.39-139.393l139.397,139.393  C307.322,253.536,311.161,255,315,255c3.839,0,7.678-1.464,10.607-4.394C331.464,244.748,331.464,235.251,325.606,229.393z"/>
                    </svg>
            </div>
            <div if:false={hideCircle} class="circle-active" title="hide" onmouseover={showDiv} onmouseout={hideDiv}>
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 22 22" fill="none" onclick={toggleCircle}>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M20.7334 2.5537C20.8179 2.46918 20.885 2.36885 20.9307 2.25843C20.9765 2.14801 21 2.02966 21 1.91013C21 1.79061 20.9765 1.67226 20.9307 1.56184C20.885 1.45142 20.8179 1.35109 20.7334 1.26657C20.6489 1.18206 20.5486 1.11502 20.4382 1.06928C20.3277 1.02354 20.2094 1 20.0899 1C19.9703 1 19.852 1.02354 19.7416 1.06928C19.6311 1.11502 19.5308 1.18206 19.4463 1.26657L11 9.71469L2.5537 1.26657C2.46918 1.18206 2.36885 1.11502 2.25843 1.06928C2.14801 1.02354 2.02966 1 1.91013 1C1.79061 1 1.67226 1.02354 1.56184 1.06928C1.45142 1.11502 1.35109 1.18206 1.26657 1.26657C1.18206 1.35109 1.11502 1.45142 1.06928 1.56184C1.02354 1.67226 1 1.79061 1 1.91013C1 2.02966 1.02354 2.14801 1.06928 2.25843C1.11502 2.36885 1.18206 2.46918 1.26657 2.5537L9.71469 11L1.26657 19.4463C1.09589 19.617 1 19.8485 1 20.0899C1 20.3312 1.09589 20.5627 1.26657 20.7334C1.43726 20.9041 1.66875 21 1.91013 21C2.15152 21 2.38301 20.9041 2.5537 20.7334L11 12.2853L19.4463 20.7334C19.617 20.9041 19.8485 21 20.0899 21C20.3312 21 20.5627 20.9041 20.7334 20.7334C20.9041 20.5627 21 20.3312 21 20.0899C21 19.8485 20.9041 19.617 20.7334 19.4463L12.2853 11L20.7334 2.5537Z" fill=grey stroke=grey/>
                    </svg>
                <div class="circle" onclick={toggleBot} title="chatbot" onmouseover={showDiv} onmouseout={hideDiv}>
                    <img src={chatBot} alt="">
                </div>
            </div>
        </template>
        
        <template if:true={popupOpen}>
            
                <div class="content" style="background-color: rgb(255, 255, 255); height: 570px; width: 370px; border-radius: 8px;" onclick={checkPopupStatus}>
                    <template if:false={isChatStarted}>
                        <div class="closebar" style="height: 67px; background-color: white">
                            <div class="left-bar"></div>
                            <div class="right-bar">
                                <button class="slds-button slds-button_icon hover" title="Close" onclick={handleClearClose}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 22 22" fill="none">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M20.7334 2.5537C20.8179 2.46918 20.885 2.36885 20.9307 2.25843C20.9765 2.14801 21 2.02966 21 1.91013C21 1.79061 20.9765 1.67226 20.9307 1.56184C20.885 1.45142 20.8179 1.35109 20.7334 1.26657C20.6489 1.18206 20.5486 1.11502 20.4382 1.06928C20.3277 1.02354 20.2094 1 20.0899 1C19.9703 1 19.852 1.02354 19.7416 1.06928C19.6311 1.11502 19.5308 1.18206 19.4463 1.26657L11 9.71469L2.5537 1.26657C2.46918 1.18206 2.36885 1.11502 2.25843 1.06928C2.14801 1.02354 2.02966 1 1.91013 1C1.79061 1 1.67226 1.02354 1.56184 1.06928C1.45142 1.11502 1.35109 1.18206 1.26657 1.26657C1.18206 1.35109 1.11502 1.45142 1.06928 1.56184C1.02354 1.67226 1 1.79061 1 1.91013C1 2.02966 1.02354 2.14801 1.06928 2.25843C1.11502 2.36885 1.18206 2.46918 1.26657 2.5537L9.71469 11L1.26657 19.4463C1.09589 19.617 1 19.8485 1 20.0899C1 20.3312 1.09589 20.5627 1.26657 20.7334C1.43726 20.9041 1.66875 21 1.91013 21C2.15152 21 2.38301 20.9041 2.5537 20.7334L11 12.2853L19.4463 20.7334C19.617 20.9041 19.8485 21 20.0899 21C20.3312 21 20.5627 20.9041 20.7334 20.7334C20.9041 20.5627 21 20.3312 21 20.0899C21 19.8485 20.9041 19.617 20.7334 19.4463L12.2853 11L20.7334 2.5537Z" fill=#0176D3 stroke=#0176D3/>
                                        </svg>
                                    <span class="slds-assistive-text">Close</span>
                                 </button>
                            </div>
                        </div>
                    </template>
                    <template if:true={isChatStarted}>
                        <div class="closebar top-bar" style="background-color: #00AEFF;">
                            <div class="left-bar">
                                <div><img src={chatBot} alt="chatBot" height="35px" width="35px"></div>
                                <div>
                                    <div><p>BotGenius</p></div>
                                    <div class="bottom-bar">
                                        <div class="green-dot"></div>
                                        <div><p>Online</p></div>
                                    </div>
                                </div>
                            </div>
                            <div class="right-bar">
                                <button class="slds-button slds-button_icon hover" title="Hide" onclick={togglePopupClose}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" viewBox="0 0 16 16" fill="white">
                                    <path d="M0 8a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1z" fill="white"/>
                                    </svg></button>
                                <button class="slds-button slds-button_icon hover" title="Close" onclick={toggleFeedback}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="20px" viewBox="0 0 22 22" fill="none">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M20.7334 2.5537C20.8179 2.46918 20.885 2.36885 20.9307 2.25843C20.9765 2.14801 21 2.02966 21 1.91013C21 1.79061 20.9765 1.67226 20.9307 1.56184C20.885 1.45142 20.8179 1.35109 20.7334 1.26657C20.6489 1.18206 20.5486 1.11502 20.4382 1.06928C20.3277 1.02354 20.2094 1 20.0899 1C19.9703 1 19.852 1.02354 19.7416 1.06928C19.6311 1.11502 19.5308 1.18206 19.4463 1.26657L11 9.71469L2.5537 1.26657C2.46918 1.18206 2.36885 1.11502 2.25843 1.06928C2.14801 1.02354 2.02966 1 1.91013 1C1.79061 1 1.67226 1.02354 1.56184 1.06928C1.45142 1.11502 1.35109 1.18206 1.26657 1.26657C1.18206 1.35109 1.11502 1.45142 1.06928 1.56184C1.02354 1.67226 1 1.79061 1 1.91013C1 2.02966 1.02354 2.14801 1.06928 2.25843C1.11502 2.36885 1.18206 2.46918 1.26657 2.5537L9.71469 11L1.26657 19.4463C1.09589 19.617 1 19.8485 1 20.0899C1 20.3312 1.09589 20.5627 1.26657 20.7334C1.43726 20.9041 1.66875 21 1.91013 21C2.15152 21 2.38301 20.9041 2.5537 20.7334L11 12.2853L19.4463 20.7334C19.617 20.9041 19.8485 21 20.0899 21C20.3312 21 20.5627 20.9041 20.7334 20.7334C20.9041 20.5627 21 20.3312 21 20.0899C21 19.8485 20.9041 19.617 20.7334 19.4463L12.2853 11L20.7334 2.5537Z" fill="White" stroke="White"/>
                                        </svg>
                                    <span class="slds-assistive-text">Close</span>
                                 </button>
                            </div>
                        </div>
                    </template>
                    
                    <div class={popupClass}>
                        <template if:false={isChatStarted}>
                        <div class="welcome">
                            <p>Hello</p>
                            <p>I'm BotGenius</p>
                            <img src={chatBot} alt="bot genius">
                                                    </div>
                        </template>
                        <div class="message">

                            <template if:true={messages} for:each={messages} for:item="message" >

                                <div if:true={message.isQuestion} key={message} style="display: flex; flex-direction: row; width: 100%">
                                    <div class="bot-message">
                                        <div class="bot-icon"><img src={chatBot} alt="chatBot" height="35px" width="35px"></div>
                                        <div class="chatTime">
                                            <p class="left-message">{message.text}</p>
                                            <p class="leftTime">{message.time}</p>
                                        </div>
                                    </div>
                                </div>

                                <div if:true={message.isAnswer} key={message}>
                                    <div style="float: right; display:flex; width: 80%; justify-content:flex-end">
                                        <div class="chatTime">
                                            <p class="right-message">{message.text}</p>
                                            <p class="rightTime">{message.time}</p>
                                        </div>
                                        <div class="bot-icon" key={message}><img src={chatUser} alt="chatBot" height="35px" width="35px" style="border-radius: 50%"></div>
                                    </div>
                                </div>

                                <div if:true={message.isSolution} key={message} style="display: flex; flex-direction: row; width: 100%">
                                    <div class="bot-message" key={message}>
                                        <div class="bot-icon"><img src={chatBot} alt="chatBot" height="35px" width="35px"></div>
                                        <div class="chatTime">
                                            <p class="left-message">{message.text}</p>
                                            <p class="leftTime">{message.time}</p>
                                            <div if:true={useful} class="satisfied-buttons">
                                                <button class="satisfied" onclick={toggleHelpful}><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="thumbs-up" height="20px" width="20px"><path d="M7.5 23.501h-7a.5.5 0 0 1-.5-.5v-12a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5zm-6.5-1h6v-11H1v11z"></path><path d="M19.75 22.501H10.5c-.925 0-2.605-.398-3.354-1.146a.5.5 0 0 1 .707-.707c.473.473 1.834.854 2.646.854h9.25c.689 0 1.25-.561 1.25-1.25 0-.344-.14-.666-.395-.907a.499.499 0 0 1 .286-.859A1.249 1.249 0 0 0 22 17.251c0-.344-.14-.666-.395-.907a.499.499 0 0 1 .286-.859A1.247 1.247 0 0 0 23 14.251c0-.466-.262-.89-.684-1.106a.497.497 0 0 1-.034-.87c.449-.278.718-.754.718-1.274 0-.827-.673-1.5-1.5-1.5h-7a.502.502 0 0 1-.468-.677c.01-.027.968-2.564.968-4.323 0-1.637-1.452-3-2-3-.431 0-.792.157-1 .272v3.228a.501.501 0 0 1-.046.209l-3 6.5a.506.506 0 0 1-.23.238l-1 .5a.5.5 0 0 1-.447-.895l.843-.421L11 4.891v-3.39c0-.152.069-.295.188-.391A3.13 3.13 0 0 1 13 .501c1.157 0 3 1.831 3 4 0 1.368-.49 3.071-.795 4H21.5c1.378 0 2.5 1.122 2.5 2.5 0 .631-.235 1.223-.65 1.675.411.413.65.974.65 1.575a2.24 2.24 0 0 1-1.235 2 2.24 2.24 0 0 1-1 3 2.253 2.253 0 0 1-2.015 3.25z"></path></svg>  Helpful</button>
                                                <button class="not-satisfied" onclick={toggleNotHelpful}><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="20px" height="20px" viewBox="0 0 256 256" xml:space="preserve"><defs></defs><g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
	<path d="M 81 41.6 H 70 c -1.1 0 -2 0.9 -2 2 s 0.9 2 2 2 h 11 c 1.1 0 2 -0.9 2 -2 S 82.1 41.6 81 41.6 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
	<path d="M 81.7 28.4 H 70 c -1.1 0 -2 0.9 -2 2 s 0.9 2 2 2 h 11.7 c 1.1 0 2 -0.9 2 -2 S 82.8 28.4 81.7 28.4 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
	<path d="M 74.1 15.2 h -7 c -1.1 0 -2 0.9 -2 2 s 0.9 2 2 2 h 7 c 1.1 0 2 -0.9 2 -2 S 75.2 15.2 74.1 15.2 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
	<path d="M 48.7 2 c -6.5 0 -13 1.6 -17.1 4.3 c -1.3 0.9 -2.8 1.4 -4.2 1.4 h -3.5 c -1.1 0 -2 0.9 -2 2 s 0.9 2 2 2 h 3.5 c 2.2 0 4.4 -0.7 6.4 -2 c 3.6 -2.4 9.8 -3.8 15.8 -3.6 l 24.5 0 c 2.2 0 4 1.8 4 4 v 1.2 c 0 2.2 -1.8 4 -4 4 c -1.1 0 -2 0.9 -2 2 s 0.9 2 2 2 H 82 c 2.2 0 4 1.8 4 4 v 1.2 c 0 2.2 -1.8 4 -4 4 h -0.3 c -1.1 0 -2 0.9 -2 2 s 0.9 2 2 2 c 2.2 0 4 1.8 4 4 v 1.2 c 0 2.2 -1.8 4 -4 4 H 81 c -1.1 0 -2 0.9 -2 2 s 0.9 2 2 2 c 2.2 0 4 1.8 4 4 v 1.2 c 0 2.2 -1.8 4 -4 4 l -23.3 0 c 0 0 0 0 0 0 c -0.7 0 -1.4 0.4 -1.7 1 c -0.4 0.6 -0.4 1.4 0 2 c 2.4 4.1 3.1 15.1 0.5 21.6 c -1 2.5 -2.4 4.1 -4.1 4.5 c -0.2 0 -0.4 0 -0.5 -0.1 c -0.2 -0.2 -0.4 -0.4 -0.4 -0.7 C 50 69.5 41.4 50.1 30.8 49.5 c 0 0 -0.1 0 -0.1 0 h -6.8 c -1.1 0 -2 0.9 -2 2 s 0.9 2 2 2 h 6.7 c 6.8 0.5 15.3 15.6 16.9 30.1 c 0.2 1.4 0.9 2.7 2.1 3.6 c 1.1 0.8 2.5 1 3.8 0.6 c 2.9 -0.8 5.2 -3.2 6.7 -6.9 c 2.6 -6.5 2.4 -16.2 0.5 -22.1 l 20.3 0 c 4.4 0 8 -3.6 8 -8 v -1.2 c 0 -2.2 -0.9 -4.2 -2.4 -5.7 c 1.9 -1.5 3.1 -3.7 3.1 -6.3 v -1.2 c 0 -2.3 -1 -4.4 -2.6 -5.9 c 1.7 -1.5 2.8 -3.7 2.8 -6.1 v -1.2 c 0 -4.4 -3.6 -8 -8 -8 h -1 c 0.7 -1.2 1.1 -2.5 1.1 -4 V 10 c 0 -4.4 -3.6 -8 -8 -8 H 49.7 C 49.4 2 49 2 48.7 2 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
	<path d="M 21.4 2 H 4.5 C 2 2 0 4.1 0 6.6 v 47.8 c 0 2.5 2 4.5 4.5 4.5 h 16.9 c 2.5 0 4.5 -2 4.5 -4.5 V 6.6 C 25.9 4.1 23.9 2 21.4 2 z M 4.5 54.9 c -0.3 0 -0.5 -0.2 -0.5 -0.5 V 6.6 C 4 6.3 4.2 6 4.5 6 h 16.9 c 0.3 0 0.5 0.2 0.5 0.5 v 47.8 c 0 0.3 -0.2 0.5 -0.5 0.5 H 4.5 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
	<path d="M 13 7.9 c -1.1 0 -2 0.9 -2 2 v 6.5 c 0 1.1 0.9 2 2 2 s 2 -0.9 2 -2 V 9.9 C 15 8.8 14.1 7.9 13 7.9 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
</g>
</svg>  Not Helpful</button>
                                            </div>
                                            <div if:true={notHelpful} class="notHelpful">
                                                <button class="mail" onclick={emailPopup}>Send mail</button>
                                                <button class="redirect" onclick={redirectToFaq}>Faq page</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </template>
                            
                            <div if:true={isIssue} style="display: flex; float: left; width: 100%" >
                                <div class="bot-icon"><img src={chatBot} alt="chatBot" height="35px" width="35px"></div>
                                <div class="issue-options" if:true={isIssue}>
                                    <p class="question">{question}</p>
                                    <template if:true={issues} for:each={issues} for:item="option">
                                        <div key={option} class="options hover" onclick={handleClick} data-key={option} data-value={option}>
                                            <p>{option}</p>
                                        </div>
                                    </template>
                                </div>
                            </div>

                            

                            <template if:true={mailSent}>
                                <div key={message} style="float: right; display:flex; width: 80%; justify-content:flex-end">
                                    <div class="email-message">
                                        <div class="email-message-body texts">
                                            <label for="email"><span class="required">*</span>Email</label>
                                            <input type="text" placeholder="Enter your Email" name="email" data-id="replyAddress" value={replyAddress} disabled>
                                            <label for="message"><span class="required">*</span>Message</label>
                                            <textarea name="message" data-id="body"  disabled>{body}</textarea>
                                            <template if:true={uploadedFiles.length}>
                                                <div class="uploaded-files">
                                                    <h3>Uploaded Files</h3>
                                                    <ul>
                                                        <template for:each={uploadedFiles} for:item="file">
                                                            <li key={file.documentId} class="file-item">
                                                                <img src={file.displayUrl} alt="File Logo" class="file-logo" />
                                                                <div class="file-info">
                                                                    <p class="file-name" title={file.fileName}>
                                                                        {file.fileNameExtraShort}
                                                                    </p>
                                                                    <div class="file-size">{file.fileSize}</div>
                                                                </div>
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" class="file-icon" data-id={file.id}>
                                                                    <rect width="20" height="20" rx="10" fill="#94C4FE" data-id={file.id} />
                                                                    <path d="M15 7L8.125 13L5 10.2727" stroke="#E7F4FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-id={file.id} />
                                                                </svg>
                                                            </li>
                                                        </template>
                                                    </ul>
                                                </div>

                                            </template>
                                            <button class="mail-submit mail-sent" onclick={handleSendEmail} disabled>Email Sent</button>

                                    </div></div>
                                    <div class="bot-icon" key={message}><img src={chatUser} alt="chatBot" height="35px" width="35px" style="border-radius: 50%">
                                    </div>
                                </div>
                            </template>

                            <template if:true={isSpinner}>
                                <div class="bot-message" >
                                    <div class="bot-icon"><img src={chatBot} alt="chatBot" height="35px" width="35px"></div>
                                    <div class="spinner-text">
                                        <div class="dot"></div>
                                        <div class="dot"></div>
                                        <div class="dot"></div>
                                    </div>
                                </div>
                            </template>

                            <template if:true={isEmail}>
                                <div class="mail-container">
                                    <div class="mail-body texts">
                                        <label for="email"><span class="required">*</span>Email</label>
                                        <input type="text" placeholder="Enter your Email" name="email" data-id="replyAddress" onchange={handleInputChange}>
                                        <div if:true={emailErrorMessage}>
                                            <label class="error-message" style="color: red;">Invalid Email Address</label>
                                        </div>
                                        <label for="message"><span class="required">*</span>Message</label>
                                        <textarea name="message" data-id="body" onchange={handleInputChange}></textarea>
                                        <label for="fileUploader">Add Attachment</label>
                                        <lightning-input type="file" label="Attachments" variant="label-hidden" multiple onchange={handleFilesChange}></lightning-input>
                                        <template if:true={uploadedFiles.length}>
                                            <div class="uploaded-files">
                                                <h3>Uploaded Files</h3>
                                                <ul>
                                                    <template for:each={uploadedFiles} for:item="file">
                                                        <li key={file.documentId} class="file-item">
                                                            <img src={file.displayUrl} alt="File Logo" class="file-logo" />
                                                            <div class="file-info">
                                                                <p class="file-name" title={file.fileName}>
                                                                    {file.fileNameShort}
                                                                </p>
                                                                <div class="file-size">{file.fileSize}</div>
                                                            </div>
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" class="file-icon" data-id={file.id} onclick={handleRemoveFile}>
                                                                <rect width="20" height="20" rx="10" fill="#ff7e4c" data-id={file.id} />
                                                                <path d="M6 6L14 14" stroke="#E7F4FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-id={file.id} />
                                                                <path d="M14 6L6 14" stroke="#E7F4FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-id={file.id} />
                                                            </svg>                                                            
                                                        </li>
                                                    </template>
                                                </ul>
                                            </div>
                                        </template>
                                        <div if:true={fileSizeError}>
                                            <label class="error-message" style="color: red;">Total file size must not exceed 2.5 MB.</label>
                                        </div>
                                        <button class="mail-submit" onclick={handleSendEmail}>Submit</button>
                                        <div if:true={attachmentError}>
                                            <label class="error-message" style="color: red;">Only image files (PNG, JPG, JPEG, GIF) are allowed.</label>
                                        </div>
                                    </div>
                                </div>
                            </template>

                            <div class="feedback_main" data-display={isFeedbackPopup}>
                                <div class="feedback-container">
                                    <div class="feedback">
                                        <div><p>Please give your feedback?</p></div>
                                        <div class="stars">
                                            <img src={item1} class="item" onclick={toggleitem} data-key="1">
                                            <img src={item2} class="item" onclick={toggleitem} data-key="2">
                                            <img src={item3} class="item" onclick={toggleitem} data-key="3">
                                            <img src={item4} class="item" onclick={toggleitem} data-key="4">
                                            <img src={item5} class="item" onclick={toggleitem} data-key="5">
                                        </div>
                                        <div class="user-note">
                                            <label for="message">Feedback</label>
                                            <textarea name="Feedback" data-id="feedback" onchange={handleFeedbackChange} onkeyup={handleFeedbackChange} placeholder="Your feedback is valuable to us"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="submit-feedback">
                                    <button onclick={submitFeedback} class="slds-button slds-button_brand feedbackBtn" disabled>Submit</button>
                                </div>
                            </div>

                            

                        </div>
                        
                    </div>
                    <template if:false={closeFooter}>
                        <div class="footer">
                           

                                <div class="chat-bar" if:false={hideChatBar}>
                                    <div class="email-border" onclick={emailPopup} title="Send Email">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="20" viewBox="0 0 25 20" fill="none">
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.965 11.7787L12.5025 14.3587L15.9125 11.8493L23.5562 19.8933C23.355 19.9627 23.14 20 22.9163 20H2.08375C1.80875 20 1.54625 19.9427 1.305 19.84L8.965 11.7787ZM25 5.168V17.7773C25 18.1067 24.9325 18.4187 24.8125 18.7L17.32 10.8147L25 5.168ZM1.1795e-06 5.23867L7.5525 10.748L0.132501 18.5587C0.0446209 18.3088 -0.000265292 18.0442 1.1795e-06 17.7773V5.23867ZM22.9163 0C24.0662 0 25 0.994666 25 2.22267V3.004L12.4975 12.1973L1.1795e-06 3.08V2.22267C1.1795e-06 0.996 0.932501 0 2.08375 0H22.9163Z" fill="#00AEFF"/>
                                            </svg>
                                    </div>
                                    <div class="chat-input">
                                        <input type="text" placeholder="Write your message" class="communicate"  onkeypress={checkEnter}>
                                        <div onclick={sendChat} class="hover" title="Send">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="27" height="26" viewBox="0 0 27 26" fill="none">
                                                <path d="M25.4557 12.7279L8.27301 21.0011L11.455 12.7279L8.27301 4.45477L25.4557 12.7279Z" fill="white" stroke="#00AEFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M25.4557 12.7279H11.455" stroke="#00AEFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                </svg>
                                        </div>
                                    </div>
                                </div>
                                <div if:true={isOnlyEmail} class="submit-email" style="width: 100%;" onclick={emailPopup}>
                                    <button>Email Us</button>
                                </div>
                                <div if:true={isSol} class="submit-email" style="width: 100%;" onclick={handleChat}>
                                    <button>Start new chat</button>
                                </div>
                        </div>
                </template>

                
                </div>
                
            </template>
    </div>
    <c-custom-timeout ontimeoutmethod={handleTimeout}></c-custom-timeout>
</template>