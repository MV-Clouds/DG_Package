<template>
    <div class="main-div">
        <c-message-popup onconfirmation={handleConfirmation}></c-message-popup>
        <c-document-loader display={showSpinner} full-size={isChild}></c-document-loader>
        <template if:true={showListViewPopup}>
            <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01" class="section-div slds-modal slds-fade-in-open">
                <div class="show-list-view-div">
                    <div class="title-div">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="-0.5 -0.5 24 24" height="20" width="30" ><path d="M3.162490416666667 20.125C2.7791570833333332 20.125 2.443740416666667 19.981250000000003 2.156240416666667 19.69375C1.8687404166666666 19.40625 1.7249904166666667 19.070833333333333 1.7249904166666667 18.6875V4.3125C1.7249904166666667 3.9291666666666667 1.8687404166666666 3.59375 2.156240416666667 3.3062500000000004C2.443740416666667 3.01875 2.7791570833333332 2.875 3.162490416666667 2.875H19.8375C20.220833333333335 2.875 20.55625 3.01875 20.84375 3.3062500000000004C21.13125 3.59375 21.275 3.9291666666666667 21.275 4.3125V18.6875C21.275 19.070833333333333 21.13125 19.40625 20.84375 19.69375C20.55625 19.981250000000003 20.220833333333335 20.125 19.8375 20.125H3.162490416666667ZM8.625 16.291666666666668C8.896495833333335 16.291666666666668 9.1241 16.19981041666667 9.3078125 16.016145833333333C9.491477083333333 15.83248125 9.583333333333334 15.604877083333333 9.583333333333334 15.333333333333334C9.583333333333334 15.061789583333333 9.491477083333333 14.834185416666667 9.3078125 14.650520833333333C9.1241 14.466856250000001 8.896495833333335 14.375 8.625 14.375H5.75C5.47845625 14.375 5.250852083333333 14.466856250000001 5.0671875 14.650520833333333C4.883475 14.834185416666667 4.791657083333334 15.061789583333333 4.791657083333334 15.333333333333334C4.791657083333334 15.604877083333333 4.883475 15.83248125 5.0671875 16.016145833333333C5.250852083333333 16.19981041666667 5.47845625 16.291666666666668 5.75 16.291666666666668H8.625ZM13.943750000000001 11.667708333333335L13.248958333333333 10.972916666666666C13.057291666666668 10.78125 12.833664583333334 10.68939375 12.578125 10.697395833333333C12.322537500000001 10.705397916666668 12.098958333333334 10.805208333333335 11.907291666666667 10.996875C11.73158125 11.188541666666667 11.639725 11.412168750000001 11.631770833333333 11.667708333333335C11.62376875 11.923247916666666 11.715625 12.146875000000001 11.907291666666667 12.338541666666668L13.440625 13.871875000000001C13.584375000000001 14.015625 13.752083333333333 14.0875 13.943750000000001 14.0875C14.135416666666668 14.0875 14.303125000000001 14.015625 14.446875 13.871875000000001L18.01666666666667 10.302083333333334C18.208333333333336 10.110416666666667 18.304166666666667 9.886789583333332 18.304166666666667 9.631250000000001C18.304166666666667 9.375710416666667 18.208333333333336 9.152083333333334 18.01666666666667 8.960416666666667C17.825000000000003 8.76875 17.597395833333334 8.672916666666667 17.333854166666665 8.672916666666667C17.0703125 8.672916666666667 16.842708333333334 8.76875 16.651041666666668 8.960416666666667L13.943750000000001 11.667708333333335ZM8.625 12.458333333333334C8.896495833333335 12.458333333333334 9.1241 12.366477083333333 9.3078125 12.1828125C9.491477083333333 11.999147916666667 9.583333333333334 11.771543750000001 9.583333333333334 11.5C9.583333333333334 11.22845625 9.491477083333333 11.000852083333335 9.3078125 10.8171875C9.1241 10.633522916666667 8.896495833333335 10.541666666666668 8.625 10.541666666666668H5.75C5.47845625 10.541666666666668 5.250852083333333 10.633522916666667 5.0671875 10.8171875C4.883475 11.000852083333335 4.791657083333334 11.22845625 4.791657083333334 11.5C4.791657083333334 11.771543750000001 4.883475 11.999147916666667 5.0671875 12.1828125C5.250852083333333 12.366477083333333 5.47845625 12.458333333333334 5.75 12.458333333333334H8.625ZM8.625 8.625C8.896495833333335 8.625 9.1241 8.53314375 9.3078125 8.349479166666667C9.491477083333333 8.165814583333333 9.583333333333334 7.938210416666667 9.583333333333334 7.666666666666667C9.583333333333334 7.395122916666667 9.491477083333333 7.16751875 9.3078125 6.983854166666666C9.1241 6.800189583333334 8.896495833333335 6.708333333333334 8.625 6.708333333333334H5.75C5.47845625 6.708333333333334 5.250852083333333 6.800189583333334 5.0671875 6.983854166666666C4.883475 7.16751875 4.791657083333334 7.395122916666667 4.791657083333334 7.666666666666667C4.791657083333334 7.938210416666667 4.883475 8.165814583333333 5.0671875 8.349479166666667C5.250852083333333 8.53314375 5.47845625 8.625 5.75 8.625H8.625Z" stroke-width="1"></path></svg>
                        <p>Select List View</p>
                    </div>
                    <div class="search-field-div">
                        <div class="search-img">
                            <lightning-icon icon-name="utility:search" alternative-text="Approved" title="Approved" size="x-small" ></lightning-icon>
                        </div>
                        <input class="field-search-input" type="search" placeholder="Search list view..." onkeyup={handleListViewSearch} onchange={handleListViewSearch} onblur={handleListViewSearch}></input>
                    </div>
                    <div class="list-view-selection-div">
                        <template for:each={updatedAllListViews} for:index="i" for:item="option">
                            <div key={option} data-index={index} class="select-predefined-option">
                                <li data-index={index} class="select-predefined-option-li">{option.label}</li>
                                <button data-value={option.value} data-index={index} onclick={handleListViewChange}>
                                    <svg xmlns="http://www.w3.org/2000/svg" class="proceed-btn-svg"  fill="#00aeff" viewBox="-0.5 -0.5 24 24" height="20" width="20">
                                        <path d="M16.866666666666667 17.633333333333333L16.459375 17.226041666666667C16.315625 17.082291666666666 16.14393958333333 17.010416666666668 15.944270833333333 17.010416666666668C15.744602083333334 17.010416666666668 15.572916666666668 17.082291666666666 15.429166666666669 17.226041666666667C15.285416666666666 17.369791666666668 15.213541666666668 17.5375 15.213541666666668 17.729166666666668C15.213541666666668 17.920833333333334 15.285416666666666 18.088541666666668 15.429166666666669 18.232291666666665L16.483333333333334 19.286458333333336C16.595122916666668 19.398247916666666 16.722916666666666 19.45416666666667 16.866666666666667 19.45416666666667C17.010416666666668 19.45416666666667 17.138210416666666 19.398247916666666 17.25 19.286458333333336L19.69375 16.890625C19.8375 16.746875000000003 19.909375 16.575189583333337 19.909375 16.375520833333333C19.909375 16.175852083333332 19.8375 16.004166666666666 19.69375 15.860416666666667C19.55 15.716666666666667 19.37831458333333 15.644791666666666 19.178645833333334 15.644791666666666C18.978977083333334 15.644791666666666 18.807291666666668 15.716666666666667 18.663541666666667 15.860416666666667L16.866666666666667 17.633333333333333ZM17.561458333333334 22.017708333333335C16.315625 22.017708333333335 15.253456250000001 21.574479166666666 14.375 20.688020833333333C13.49654375 19.801562500000003 13.057291666666668 18.751372916666668 13.057291666666668 17.5375C13.057291666666668 16.291666666666668 13.49654375 15.225520833333333 14.375 14.3390625C15.253456250000001 13.452604166666667 16.315625 13.009375 17.561458333333334 13.009375C18.79133541666667 13.009375 19.849479166666665 13.452604166666667 20.7359375 14.3390625C21.622395833333336 15.225520833333333 22.065625 16.291666666666668 22.065625 17.5375C22.065625 18.751372916666668 21.622395833333336 19.801562500000003 20.7359375 20.688020833333333C19.849479166666665 21.574479166666666 18.79133541666667 22.017708333333335 17.561458333333334 22.017708333333335ZM4.192713125 18.208333333333336C3.905213125 18.208333333333336 3.6935795833333334 18.084564583333336 3.557817291666667 17.83697916666667C3.4220502083333337 17.589393750000003 3.434029375 17.345833333333335 3.5937547916666666 17.106250000000003L7.1875 11.5L3.5937547916666666 5.893750000000001C3.434029375 5.654166666666667 3.4220502083333337 5.410606250000001 3.557817291666667 5.163020833333333C3.6935795833333334 4.915435416666667 3.905213125 4.791666666666667 4.192713125 4.791666666666667H14.327083333333333C14.67845625 4.791666666666667 14.997916666666667 4.883522916666667 15.285416666666666 5.0671875C15.572916666666668 5.250852083333333 15.820502083333334 5.47845625 16.028125000000003 5.75L20.029166666666665 11.35625C20.156960416666667 11.531960416666667 20.15293541666667 11.69966875 20.0171875 11.859375C19.881439583333336 12.019081250000001 19.70970625 12.05904375 19.502083333333335 11.979166666666668C19.182622916666666 11.851372916666667 18.863210416666668 11.7515625 18.543750000000003 11.6796875C18.224289583333334 11.607812500000001 17.896875 11.571875 17.561458333333334 11.571875C16.73091875 11.571875 15.956249999999999 11.73158125 15.2375 12.051041666666666C14.51875 12.370502083333335 13.88783125 12.801752083333334 13.344791666666667 13.344791666666667C12.753835416666668 13.951752083333334 12.314583333333333 14.622585416666666 12.027083333333335 15.357291666666667C11.739583333333334 16.091997916666667 11.611789583333334 16.866666666666667 11.64375 17.68125C11.64375 17.825000000000003 11.595833333333333 17.948768750000003 11.5 18.052604166666665C11.404166666666667 18.156439583333334 11.292377083333335 18.208333333333336 11.164583333333335 18.208333333333336H4.192713125Z" stroke-width="1"></path>
                                    </svg>                                       
                                    Proceed
                                </button>
                            </div>
                        </template>
                        <div class="no-results" if:true={noListViewFound}>
                            <svg xmlns="http://www.w3.org/2000/svg" width="160" height="210" viewBox="0 0 280 300" fill="none" >
                                <use href="/resource/MVDG__noResultImage#no-result-image"></use>
                            </svg>                                
                            <p class="bold-text">No results found!</p>
                            <p>We Couldn't find any match for your search</p>
                        </div>
                    </div>
                    <div class="button-div">
                        <button class="list-view-button" onclick={handleCustom}> 
                            <svg xmlns="http://www.w3.org/2000/svg" width="13" height="21" viewBox="0 0 14 14" fill="gray"> <path d="M13 8H8V13C8 13.55 7.55 14 7 14C6.45 14 6 13.55 6 13V8H1C0.45 8 0 7.55 0 7C0 6.45 0.45 6 1 6H6V1C6 0.45 6.45 0 7 0C7.55 0 8 0.45 8 1V6H13C13.55 6 14 6.45 14 7C14 7.55 13.55 8 13 8Z"/> </svg>    
                            Blank Template
                        </button>
                    </div>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
        </template>
        <div lwc:if={isTabSection} class="tabSection">
            <div class="tabSection_sub">
                <div class="homeBtn" onclick={handleClose}>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="#003b57"><path d="M21.71,11.29l-9-9a1,1,0,0,0-1.42,0l-9,9a1,1,0,0,0,1.42,1.42l.29-.3V20.3A1.77,1.77,0,0,0,5.83,22H8.5a1,1,0,0,0,1-1V16.1a1,1,0,0,1,1-1h3a1,1,0,0,1,1,1V21a1,1,0,0,0,1,1h2.67A1.77,1.77,0,0,0,20,20.3V12.41l.29.3a1,1,0,0,0,1.42,0A1,1,0,0,0,21.71,11.29Z"></path></svg>
                </div>
                <div class="tab edit-tab active-tab" data-name="editTab" onclick={activeTab}>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1 2V5H3V4H5V9H3.5V11H8.5V9H7V4H9V5H11V2H1ZM21 3H14V5H20V19H4V14H2V20C2 20.5523 2.44772 21 3 21H21C21.5523 21 22 20.5523 22 20V4C22 3.44772 21.5523 3 21 3Z"></path></svg>
                    <div>Edit Template</div>
                </div>
                <div class="tab basic-tab" data-name="basicTab" onclick={activeTab}>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 22H4C3.44772 22 3 21.5523 3 21V3C3 2.44772 3.44772 2 4 2H20C20.5523 2 21 2.44772 21 3V21C21 21.5523 20.5523 22 20 22ZM19 20V4H5V20H19ZM7 6H11V10H7V6ZM7 12H17V14H7V12ZM7 16H17V18H7V16ZM13 7H17V9H13V7Z"></path></svg>
                    <div>Basic Details</div>
                </div>
                <div class="tab defaults-tab" data-name="defaultsTab" onclick={activeTab}>
                    <svg class="template-default-tab-svg" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"><g clip-path="url(#clip0_32_51)" ><path fill-rule="evenodd" clip-rule="evenodd" d="M5 5C5 4.73478 5.10536 4.48043 5.29289 4.29289C5.48043 4.10536 5.73478 4 6 4H15C15.2652 4 15.5196 4.10536 15.7071 4.29289C15.8946 4.48043 16 4.73478 16 5V12.0275C16.341 12.0653 16.6765 12.142 17 12.256V5C17 4.46957 16.7893 3.96086 16.4142 3.58579C16.0391 3.21071 15.5304 3 15 3H6C5.46957 3 4.96086 3.21071 4.58579 3.58579C4.21071 3.96086 4 4.46957 4 5V17C4 17.5304 4.21071 18.0391 4.58579 18.4142C4.96086 18.7893 5.46957 19 6 19H11.758C11.5497 18.6888 11.3811 18.3529 11.256 18H6C5.73478 18 5.48043 17.8946 5.29289 17.7071C5.10536 17.5196 5 17.2652 5 17V5Z" fill="black" ></path><path fill-rule="evenodd" clip-rule="evenodd" d="M6 7C6 6.86739 6.05268 6.74021 6.14645 6.64645C6.24021 6.55268 6.36739 6.5 6.5 6.5H14.5C14.6326 6.5 14.7598 6.55268 14.8536 6.64645C14.9473 6.74021 15 6.86739 15 7C15 7.13261 14.9473 7.25979 14.8536 7.35355C14.7598 7.44732 14.6326 7.5 14.5 7.5H6.5C6.36739 7.5 6.24021 7.44732 6.14645 7.35355C6.05268 7.25979 6 7.13261 6 7ZM6 9.5C6 9.36739 6.05268 9.24021 6.14645 9.14645C6.24021 9.05268 6.36739 9 6.5 9H14.5C14.6326 9 14.7598 9.05268 14.8536 9.14645C14.9473 9.24021 15 9.36739 15 9.5C15 9.63261 14.9473 9.75979 14.8536 9.85355C14.7598 9.94732 14.6326 10 14.5 10H6.5C6.36739 10 6.24021 9.94732 6.14645 9.85355C6.05268 9.75979 6 9.63261 6 9.5ZM6.5 11.5C6.36739 11.5 6.24021 11.5527 6.14645 11.6464C6.05268 11.7402 6 11.8674 6 12C6 12.1326 6.05268 12.2598 6.14645 12.3536C6.24021 12.4473 6.36739 12.5 6.5 12.5H10.5C10.6326 12.5 10.7598 12.4473 10.8536 12.3536C10.9473 12.2598 11 12.1326 11 12C11 11.8674 10.9473 11.7402 10.8536 11.6464C10.7598 11.5527 10.6326 11.5 10.5 11.5H6.5ZM6 14.5C6 14.3674 6.05268 14.2402 6.14645 14.1464C6.24021 14.0527 6.36739 14 6.5 14H9C9.13261 14 9.25979 14.0527 9.35355 14.1464C9.44732 14.2402 9.5 14.3674 9.5 14.5C9.5 14.6326 9.44732 14.7598 9.35355 14.8536C9.25979 14.9473 9.13261 15 9 15H6.5C6.36739 15 6.24021 14.9473 6.14645 14.8536C6.05268 14.7598 6 14.6326 6 14.5ZM15.5 20C15.9596 20 16.4148 19.9095 16.8394 19.7336C17.264 19.5577 17.6499 19.2999 17.9749 18.9749C18.2999 18.6499 18.5577 18.264 18.7336 17.8394C18.9095 17.4148 19 16.9596 19 16.5C19 16.0404 18.9095 15.5852 18.7336 15.1606C18.5577 14.736 18.2999 14.3501 17.9749 14.0251C17.6499 13.7001 17.264 13.4423 16.8394 13.2664C16.4148 13.0905 15.9596 13 15.5 13C14.5717 13 13.6815 13.3687 13.0251 14.0251C12.3687 14.6815 12 15.5717 12 16.5C12 17.4283 12.3687 18.3185 13.0251 18.9749C13.6815 19.6313 14.5717 20 15.5 20ZM15.5 21C16.0909 21 16.6761 20.8836 17.2221 20.6575C17.768 20.4313 18.2641 20.0998 18.682 19.682C19.0998 19.2641 19.4313 18.768 19.6575 18.2221C19.8836 17.6761 20 17.0909 20 16.5C20 15.9091 19.8836 15.3239 19.6575 14.7779C19.4313 14.232 19.0998 13.7359 18.682 13.318C18.2641 12.9002 17.768 12.5687 17.2221 12.3425C16.6761 12.1164 16.0909 12 15.5 12C14.3065 12 13.1619 12.4741 12.318 13.318C11.4741 14.1619 11 15.3065 11 16.5C11 17.6935 11.4741 18.8381 12.318 19.682C13.1619 20.5259 14.3065 21 15.5 21Z" fill="black" ></path><path fill-rule="evenodd" clip-rule="evenodd" d="M17.4985 14.514C17.4048 14.4203 17.2776 14.3676 17.145 14.3676C17.0125 14.3676 16.8853 14.4203 16.7915 14.514L16.3965 14.909L17.103 15.6165L17.4985 15.221C17.5923 15.1272 17.6449 15.0001 17.6449 14.8675C17.6449 14.7349 17.5923 14.6078 17.4985 14.514ZM16.75 15.97L16.043 15.263L13.5085 17.7975V18.5045H14.2155L16.75 15.97Z" fill="black" ></path></g><defs ><clipPath  id="clip0_32_51-104"><rect width="24" height="24" fill="white" ></rect></clipPath></defs></svg>
                    <div>Template Defaults</div>
                </div>
                <div class="TemplateName" data-name="basicTab" onclick={activeTab}>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="#000000" d="M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM80 64h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H80c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H80c-8.8 0-16-7.2-16-16s7.2-16 16-16zm16 96H288c17.7 0 32 14.3 32 32v64c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V256c0-17.7 14.3-32 32-32zm0 32v64H288V256H96zM240 416h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H240c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>
                    <div class="TemplateNameText">
                        {existingTemplateData.MVDG__Template_Name__c}
                    </div>
                </div>
                <div class="active-tab-bar"></div>
            </div>
        </div>

        <div class="main-flex-div override-css-from-js">
            <div class="main-fields-div">
                <div class="title-div title-with-btn">
                    <div class="title-text">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"  height="15" width="20"><g id="cursor-click"><path id="Union" fill="#fff" fill-rule="evenodd" d="M3.65788 0.162155c0.4001 -0.107206 0.81135 0.130231 0.91856 0.53033l0.44824 1.672865c0.10721 0.4001 -0.13023 0.81135 -0.53033 0.91856 -0.4001 0.1072 -0.81135 -0.13024 -0.91856 -0.53033l-0.44824 -1.67287c-0.10721 -0.400096 0.13023 -0.811348 0.53033 -0.918555ZM0.0716402 3.75462c-0.1072063 0.4001 0.1302308 0.81135 0.5303298 0.91856l1.67286 0.44824c0.4001 0.10721 0.81135 -0.13023 0.91856 -0.53033 0.10721 -0.4001 -0.13023 -0.81135 -0.53033 -0.91856L0.990199 3.22429c-0.4001 -0.10721 -0.811352 0.13023 -0.9185588 0.53033ZM4.47129 5.7197c-0.26087 -0.78192 0.48316 -1.52595 1.26508 -1.26507l7.11903 2.37512c0.92 0.30694 0.9084 1.61231 -0.017 1.90272l-2.0269 0.63611 2.7 2.70002c0.3905 0.3905 0.3905 1.0236 0 1.4142 -0.3905 0.3905 -1.0237 0.3905 -1.4142 0l-2.70629 -2.7063 -0.64188 2.0452c-0.29041 0.9254 -1.59578 0.9371 -1.90272 0.0171L4.47129 5.7197ZM2.06665 8.75494c-0.29289 0.2929 -0.76777 0.2929 -1.06066 0 -0.292894 -0.29289 -0.292894 -0.76776 0 -1.06066l1.22462 -1.22462c0.29289 -0.29289 0.76777 -0.29289 1.06066 0 0.29289 0.2929 0.29289 0.76777 0 1.06066L2.06665 8.75494Zm6.46008 -6.59131c0.29289 -0.29289 0.29289 -0.76776 0 -1.06066 -0.29289 -0.29289 -0.76776 -0.29289 -1.06066 0L6.24145 2.32759c-0.29289 0.2929 -0.29289 0.76777 0 1.06066 0.2929 0.2929 0.76777 0.2929 1.06066 0l1.22462 -1.22462Z" clip-rule="evenodd" stroke-width="1"></path></g></svg>
                        Column Selection
                    </div>
                    <button data-name="fields" class="clear-btn" onclick={handleClear}>
                        <svg xmlns="http://www.w3.org/2000/svg" data-name="fields" viewBox="-0.5 -0.5 20 20" stroke="#00AEFF" stroke-linecap="round"><path data-name="fields" d="M17.48 1.52L1.52 17.48 M1.52 1.52L17.48 17.48" stroke-width="2"></path></svg>
                        Clear
                    </button>
                    <button data-name="fields" class="reset-btn" onclick={handleReset} if:false={isChild}>
                        <svg xmlns="http://www.w3.org/2000/svg" data-name="fields" viewBox="0 0 24 24" fill="currentColor">
                            <path data-name="fields" d="M12 4C9.25144 4 6.82508 5.38626 5.38443 7.5H8V9.5H2V3.5H4V5.99936C5.82381 3.57166 8.72764 2 12 2C17.5228 2 22 6.47715 22 12H20C20 7.58172 16.4183 4 12 4ZM4 12C4 16.4183 7.58172 20 12 20C14.7486 20 17.1749 18.6137 18.6156 16.5H16V14.5H22V20.5H20V18.0006C18.1762 20.4283 15.2724 22 12 22C6.47715 22 2 17.5228 2 12H4Z"></path>
                        </svg>
                        Reset
                    </button> 
                </div>
                <div class="fields-div">
                    <div class="available-div">
                        <div class="labels">Available Columns</div>
                        <div class="search-all-fields-div">
                            <div class="object-select-div">
                                <c-custom-combobox
                                    class="object-select custom-combobox"
                                    value={selectedRelatedObject}
                                    placeholder="Select Parent Object"
                                    options={relatedObjects}
                                    onselect={handleRelatedObjectChange}
                                    searchable="true"
                                    multiselect="false"
                                    dropdown-position="right"
                                ></c-custom-combobox>
                            </div>
                            <div class="search-field-div">
                                <div class="search-img">
                                    <lightning-icon icon-name="utility:search" alternative-text="Approved" title="Approved" size="x-small" ></lightning-icon>
                                </div>
                                <input class="field-search-input" type="search" placeholder="Search a field..." onkeyup={handleFieldSearch} onkeypress={handleFieldSearch} onchange={handleFieldSearch} onblur={handleFieldSearch}></input>
                            </div>
                        </div>
                        <div class="selection-div">
                            <ul>
                                <template for:each={fieldOptionsToShow} for:item="option">
                                    <li class="field-li-to-select" key={option.apiName} data-api={option.apiName} data-value={option.fieldName} onclick={handleAvailableClick}>
                                        <p class={option.isSelected}>{option.fieldName}</p>
                                    </li>
                                </template>
                            </ul>
                        </div>
                    </div>
                    <div class="buttons">
                        <div class="arrow-btn" onclick={handleLeft}>
                            <svg xmlns="http://www.w3.org/2000/svg" height="20" width="17.5" viewBox="0 0 448 512"><path fill="#ffffff" d="M201.4 137.4c12.5-12.5 32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 205.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160z"/></svg>
                        </div>
                        <div class="selected-count">
                            <span class="bold-text selected-field-count">Move {selectedAvailableFields} fields</span>
                        </div>
                        <div class="arrow-btn" onclick={handleRight}>
                            <svg xmlns="http://www.w3.org/2000/svg" height="20" width="17.5" viewBox="0 0 448 512"><path fill="#ffffff" d="M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"/></svg>
                        </div>
                    </div>
    
                    <div class="selected-div">
                        <div class="labels">Selected Columns</div>
                        <div class="selection-include-btn-div">
                            <div class="selection-div selection-div-full-height">
                                <ul>
                                    <template for:each={selectedFields} for:item="option">
                                        <li class="field-li-to-selected" key={option.apiName} data-api={option.apiName} data-value={option.fieldName} onclick={handleSelectedClick} >
                                            <p class={option.isSelected}>{option.fieldName}</p>
                                        </li>
                                    </template>
                                </ul>
                            </div>
                            <div class="buttons column-buttons">
                                <div class="arrow-btn" onclick={handleTop}>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" height="20" transform="rotate(180)"><g stroke-width="0"></g><g stroke-linecap="round" stroke-linejoin="round"></g><g> <path d="M3 21H21M12 3V17M12 17L19 10M12 17L5 10" stroke="#ffffff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                                </div>
                                <div class="arrow-btn" onclick={handleUp}>
                                    <svg xmlns="http://www.w3.org/2000/svg" height="20" width="17.5" viewBox="0 0 448 512"><path fill="#ffffff" d="M246.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L224 109.3 361.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160zm160 352l-160-160c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L224 301.3 361.4 438.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3z"/></svg>
                                </div>
                                <div class="arrow-btn" onclick={handleDown}>
                                    <svg xmlns="http://www.w3.org/2000/svg" height="20" width="17.5" viewBox="0 0 448 512"><path fill="#ffffff" d="M246.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 402.7 361.4 265.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-160 160zm160-352l-160 160c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 210.7 361.4 73.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3z"/></svg>
                                </div>
                                <div class="arrow-btn" onclick={handleBottom}>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" height="20" transform="matrix(1, 0, 0, 1, 0, 0)"><g stroke-width="0"></g><g stroke-linecap="round" stroke-linejoin="round"></g><g> <path d="M3 21H21M12 3V17M12 17L19 10M12 17L5 10" stroke="#ffffff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                                </div>
                            </div>
                        </div>
                        </div>
                </div>
            </div>
            <div class="vertical-line"></div>
            <div class="main-config-div">
                <div class="config-div">
                    <div class="filter-div">
                        <div class="title-div title-with-btn">
                            <div class="title-text">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-0.75 -0.75 16 16" fill="none" height="15" width="20"><path d="M1.420214583333333 0.7937541666666666H13.079604166666666C13.482099999999999 0.7937541666666666 13.808349999999999 1.1199437499999998 13.808349999999999 1.5223791666666666L13.808470833333333 2.67796875C13.808531249999998 2.8712416666666662 13.731741666666666 3.056660416666667 13.595018749999998 3.1933229166666663L8.920762499999999 7.8673979166666665C8.784099999999999 8.004 8.707310416666667 8.18941875 8.707310416666667 8.38263125V12.977137499999998C8.707310416666667 13.451227083333333 8.261797916666666 13.79910625 7.80190625 13.684133333333332L6.344475 13.319760416666666C6.0200375 13.238681249999999 5.792447916666666 12.947170833333333 5.792447916666666 12.612764583333332V8.38263125C5.792447916666666 8.189358333333333 5.71571875 8.004 5.579056249999999 7.8673979166666665L0.90498125 3.1933229166666663C0.7683187499999999 3.056660416666667 0.6915291666666666 2.8713020833333336 0.6915291666666666 2.6780291666666662V1.522439583333333C0.6915291666666666 1.1200041666666665 1.0177791666666667 0.7937541666666666 1.420214583333333 0.7937541666666666Z" fill="white" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                                Apply Filters
                            </div>
                            <button data-name="filters" class="clear-btn" onclick={handleClear}>
                                <svg xmlns="http://www.w3.org/2000/svg" data-name="filters" viewBox="-0.5 -0.5 20 20" stroke="#00AEFF" stroke-linecap="round"><path data-name="filters" d="M17.48 1.52L1.52 17.48 M1.52 1.52L17.48 17.48" stroke-width="2"></path></svg>
                                Clear
                            </button>
                            <button data-name="filters" class="reset-btn" onclick={handleReset} if:false={isChild}>
                                <svg xmlns="http://www.w3.org/2000/svg" data-name="filters" viewBox="0 0 24 24" fill="currentColor">
                                    <path data-name="filters" d="M12 4C9.25144 4 6.82508 5.38626 5.38443 7.5H8V9.5H2V3.5H4V5.99936C5.82381 3.57166 8.72764 2 12 2C17.5228 2 22 6.47715 22 12H20C20 7.58172 16.4183 4 12 4ZM4 12C4 16.4183 7.58172 20 12 20C14.7486 20 17.1749 18.6137 18.6156 16.5H16V14.5H22V20.5H20V18.0006C18.1762 20.4283 15.2724 22 12 22C6.47715 22 2 17.5228 2 12H4Z"></path>
                                </svg>Reset
                            </button> 
                        </div>
                        <div class="logic-div">
                            <div class="logic-flex-1">
                                <div class="logic-select-div">
                                    <c-custom-combobox
                                    class="logic-select custom-combobox"
                                    label="Logic Operator"
                                    onselect={handleLogicUpdate}
                                    options={logicOperators}
                                    value={selectedLogic}
                                    searchable="false"
                                    multiple="false"
                                    ></c-custom-combobox>
                                </div>
                                <div class="custom-logic-div" if:true={isCustomLogic}>
                                    <lightning-input 
                                      class="logic-string-input"
                                      type="text"
                                      placeholder="2 OR (1 AND 3)"
                                      label="Custom Logic"
                                      value={customLogicString}
                                      onchange={handleCustomLogicUpdate}
                                      onblur={validateCustomLogic}
                                      field-level-help="Use parentheses, AND, OR, and NOT to customize the logic. For example, if you enter “(1 AND 2 AND 3) OR 4”, the flow evaluates whether the first three conditions are true or only the fourth condition is true."
                                    ></lightning-input>
                                </div>
                            </div>
                            <div class="error-div" if:true={isCustomLogic}>
                                <span class="error-text"></span>
                            </div>
            
                        </div>
                        <div class="backDropPredefined" onclick={handleSimpleInputBlur}></div>
                        <div class="all-filters-rows">
                            <template for:each={adjustedFilters} for:item="filter" for:index="index">
    
                                <div key={filter} class="filter-row">
                                    <div class="filter-index-div" data-index={index}>
                                        <span class="bold-text filter-index">{filter.displayIndex}</span>
                                    </div>
                                    <c-custom-combobox
                                        class="field-select filter-field-select custom-combobox"
                                        value={filter.fieldName}
                                        placeholder="Select field to filter"
                                        options={fieldsForFilters}
                                        onselect={handleFieldNameChange}
                                        searchable="true"
                                        multiselect="false"
                                        data-index={index}
                                        dropdown-position="right"
                                    ></c-custom-combobox>
                                    <c-custom-combobox
                                        class="operator-select custom-combobox"
                                        placeholder="Select Operator"
                                        value={filter.operator}
                                        options={filter.operators}
                                        onselect={handleOperatorChange}
                                        searchable="true"
                                        multiselect="false"
                                        data-index={index}
                                        dropdown-position="right"
                                    ></c-custom-combobox>
                                    <div class="simple-input-div  value-select-div" if:false={filter.isPicklist}>
                                        <lightning-input
                                            type={filter.inputType}
                                            step="0.0001"
                                            maxlength={filter.maxLImit}
                                            label="Value"
                                            placeholder="Enter Value"
                                            class="value-select-for-toggle"
                                            message-toggle-active="True"
                                            message-toggle-inactive="False"
                                            value={filter.value}
                                            onchange={handleValueChange}
                                            onblur={handleValueChange}
                                            onfocus={handleSimpleInputFocus}
                                            variant="label-hidden"
                                            data-index={index}>
                                        </lightning-input>
                                        <div data-index={index} class="select-predefined-option dont-display-div">
                                            <template for:each={preDefinedValues} for:index="i" for:item="option">
                                                <li key={option} data-index={index} onclick={handlePreDefinedClick} class="select-predefined-option-li">{option}</li>
                                            </template>
                                        </div>
                                    </div>
                                    <div class="picklist-input-div value-select-div" if:true={filter.isPicklist}>
                                        <c-custom-combobox
                                            if:true={filter.isMultiple}
                                            value={filter.value}
                                            placeholder="Select Value"
                                            onselect={handleValueFromComboBox}
                                            data-index={index}
                                            class="picklist-select custom-combobox"
                                            options={filter.inputType}
                                            searchable="true"
                                            multiselect="true"
                                            dropdown-position="right"
                                        ></c-custom-combobox>
                                        <c-custom-combobox
                                            if:false={filter.isMultiple}
                                            value={filter.value}
                                            placeholder="Select Value"
                                            onselect={handleValueFromComboBox}
                                            data-index={index}
                                            class="picklist-select custom-combobox"
                                            options={filter.inputType}
                                            searchable="true"
                                            multiselect="false"
                                            dropdown-position="right"
                                        ></c-custom-combobox>
                                    </div>
                                    <div class="delete-btn" data-index={index} data-name={filter} onclick={removeFilter} >
                                        <svg xmlns="http://www.w3.org/2000/svg" data-index={index} width="21" height="21" viewBox="0 0 12 16" fill="black">
                                            <path data-index={index} transform="scale (-1, 1)" transform-origin="center" d="M10.7523 5.84348C10.515 5.84348 10.3183 6.0401 10.3183 6.2774V13.8372C10.3183 14.5491 9.73525 15.1322 9.02335 15.1322H3.8366C3.1247 15.1322 2.54161 14.5491 2.54161 13.8372V6.2774C2.54161 6.0401 2.34499 5.84348 2.10769 5.84348C1.87039 5.84348 1.67377 6.0401 1.67377 6.2774V13.8372C1.67377 15.0305 2.64331 16 3.8366 16H9.02335C10.2166 16 11.1862 15.0305 11.1862 13.8372V6.2774C11.1862 6.0401 10.9963 5.84348 10.7523 5.84348Z M4.70446 13.8372V7.78936C4.70446 7.55206 4.50783 7.35544 4.27053 7.35544C4.03323 7.35544 3.83661 7.55206 3.83661 7.78936V13.8372C3.83661 14.0745 4.03323 14.2711 4.27053 14.2711C4.50783 14.2711 4.70446 14.0745 4.70446 13.8372Z M6.86785 13.4817V7.43392C6.86785 7.19662 6.67123 7 6.43392 7C6.19662 7 6 7.19662 6 7.43392V13.4817C6 13.719 6.19662 13.9157 6.43392 13.9157C6.67801 13.9157 6.86785 13.719 6.86785 13.4817Z M9.02336 13.8372V7.78936C9.02336 7.55206 8.82674 7.35544 8.58944 7.35544C8.35214 7.35544 8.15552 7.55206 8.15552 7.78936V13.8372C8.15552 14.0745 8.35214 14.2711 8.58944 14.2711C8.83352 14.2711 9.02336 14.0745 9.02336 13.8372Z M11.9862 2.35853L11.776 1.5178C11.5997 0.826237 10.8946 0.399094 10.2031 0.575375L6.84693 1.4161L6.73844 0.982179C6.56216 0.290613 5.85704 -0.136531 5.16547 0.0397509C4.47391 0.216032 4.04676 0.921158 4.22305 1.61272L4.33153 2.04665L0.982179 2.88737C0.290613 3.06366 -0.136531 3.76878 0.0397509 4.46035L0.249933 5.30107C0.310953 5.5316 0.541475 5.67398 0.778777 5.61296L11.6811 2.88737C11.9048 2.82635 12.0472 2.58905 11.9862 2.35853ZM5.38243 0.880478C5.61296 0.826237 5.85026 0.961838 5.9045 1.19236L6.01298 1.62628L5.17225 1.83647L5.06377 1.40254C5.00953 1.17202 5.14513 0.934718 5.38243 0.880478ZM0.982179 4.66375L0.873698 4.24338C0.819457 4.01286 0.955058 3.77556 1.18558 3.72132L10.4065 1.4161C10.637 1.36186 10.8743 1.49746 10.9285 1.72798L11.037 2.14835L0.982179 4.66375Z"/>
                                        </svg>                                            
                                    </div>
                                </div>
                            </template>
                            <div class="add-btn" data-index={index} onclick={addFilter}>
                                <svg xmlns="http://www.w3.org/2000/svg" width="13" height="21" viewBox="0 0 14 14" fill="black"> <path d="M13 8H8V13C8 13.55 7.55 14 7 14C6.45 14 6 13.55 6 13V8H1C0.45 8 0 7.55 0 7C0 6.45 0.45 6 1 6H6V1C6 0.45 6.45 0 7 0C7.55 0 8 0.45 8 1V6H13C13.55 6 14 6.45 14 7C14 7.55 13.55 8 13 8Z"/> </svg>
                            </div>
                        </div>
                    </div>
                    <div class="sort-div">
                        <div class="title-div title-with-btn">
                            <div class="title-text">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-0.5 -0.5 16 16" height="19" width="20">><g fill="none" fill-rule="nonzero"><path d="M15 0v15H0V0h15ZM7.870625 14.536249999999999l-0.006874999999999999 0.00125 -0.044375 0.021875000000000002 -0.0125 0.0025 -0.00875 -0.0025 -0.044375 -0.021875000000000002c-0.00625 -0.0025 -0.011875 -0.000625 -0.015 0.003125l-0.0025 0.00625 -0.010625 0.2675 0.003125 0.0125 0.00625 0.008125 0.065 0.04625 0.009375 0.0025 0.0075 -0.0025 0.065 -0.04625 0.0075 -0.01 0.0025 -0.010625 -0.010625 -0.266875c-0.00125 -0.00625 -0.005625 -0.010625 -0.010625 -0.01125Zm0.16562500000000002 -0.07062500000000001 -0.008125 0.00125 -0.115625 0.058124999999999996 -0.00625 0.00625 -0.001875 0.006874999999999999 0.01125 0.26875 0.003125 0.0075 0.005 0.004375 0.12562500000000001 0.058124999999999996c0.0075 0.0025 0.014374999999999999 0 0.018125000000000002 -0.005l0.0025 -0.00875 -0.02125 -0.38375c-0.001875 -0.0075 -0.00625 -0.0125 -0.0125 -0.013749999999999998Zm-0.44687499999999997 0.00125a0.014374999999999999 0.014374999999999999 0 0 0 -0.016875 0.00375l-0.00375 0.00875 -0.02125 0.38375c0 0.0075 0.004375 0.0125 0.010625 0.015l0.009375 -0.00125 0.12562500000000001 -0.058124999999999996 0.00625 -0.005 0.0025 -0.006874999999999999 0.010625 -0.26875 -0.001875 -0.0075 -0.00625 -0.00625 -0.11499999999999999 -0.057499999999999996Z" stroke-width="1"></path><path fill="#fff" d="M11.25 2.1875A0.9375 0.9375 0 0 1 12.1875 3.125v7.0043750000000005l0.1675 -0.1675a0.9375 0.9375 0 1 1 1.325625 1.32625l-1.7674999999999998 1.7674999999999998a0.9375 0.9375 0 0 1 -1.32625 0l-1.7674999999999998 -1.7674999999999998a0.9375 0.9375 0 1 1 1.325625 -1.32625l0.1675 0.1675V3.125A0.9375 0.9375 0 0 1 11.25 2.1875Zm-4.375 8.75a0.9375 0.9375 0 0 1 0.09 1.870625L6.875 12.8125H2.5a0.9375 0.9375 0 0 1 -0.09 -1.870625L2.5 10.9375h4.375Zm1.25 -4.375a0.9375 0.9375 0 0 1 0.09 1.870625L8.125 8.4375H2.5a0.9375 0.9375 0 0 1 -0.09 -1.870625L2.5 6.5625h5.625Zm0 -4.375a0.9375 0.9375 0 0 1 0 1.875H2.5a0.9375 0.9375 0 1 1 0 -1.875h5.625Z" stroke-width="1"></path></g></svg>
                                Order By
                            </div>
                            <button data-name="orders" class="clear-btn" onclick={handleClear}>
                                <svg xmlns="http://www.w3.org/2000/svg" data-name="orders" viewBox="-0.5 -0.5 20 20" stroke="#00AEFF" stroke-linecap="round"><path data-name="orders" d="M17.48 1.52L1.52 17.48 M1.52 1.52L17.48 17.48" stroke-width="2"></path></svg>
                                Clear
                            </button>
                            <button data-name="orders" class="reset-btn" onclick={handleReset} if:false={isChild}>
                                <svg xmlns="http://www.w3.org/2000/svg" data-name="orders" viewBox="0 0 24 24" fill="currentColor">
                                    <path data-name="orders" d="M12 4C9.25144 4 6.82508 5.38626 5.38443 7.5H8V9.5H2V3.5H4V5.99936C5.82381 3.57166 8.72764 2 12 2C17.5228 2 22 6.47715 22 12H20C20 7.58172 16.4183 4 12 4ZM4 12C4 16.4183 7.58172 20 12 20C14.7486 20 17.1749 18.6137 18.6156 16.5H16V14.5H22V20.5H20V18.0006C18.1762 20.4283 15.2724 22 12 22C6.47715 22 2 17.5228 2 12H4Z"></path>
                                </svg>Reset
                            </button> 
                        </div>
                        <div class="all-sorts-rows">
                            <template for:each={adjustedSorts} for:item="sort" for:index="index">
                                <div key={sort} class="sort-row">
                                    <div data-index={index} class="sort-index-div">
                                        <span data-index={index} class="bold-text sort-index">{sort.displayIndex}</span>
                                    </div>
                                    <c-custom-combobox
                                        class="field-select sort-field-select field-select-full-width custom-combobox"
                                        placeholder="Select field"
                                        value={sort.field}
                                        options={fieldsForFilters}
                                        onselect={handleSortFieldChange}
                                        data-index={index}
                                        multiselect="false"
                                        searchable="true"
                                    ></c-custom-combobox>
                                    <div class="sort-order">
                                        <div class="sort-btn asc-btn" data-index={index} onclick={handleAscending}>
                                            <svg xmlns="http://www.w3.org/2000/svg"  fill="#00AEFF"  data-index={index} height="24" width="27" viewBox="0 0 576 512"><path data-index={index} d="M183.6 469.6C177.5 476.2 169 480 160 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L128 365.7V64c0-17.7 14.3-32 32-32s32 14.3 32 32V365.7l32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 320c0-17.7 14.3-32 32-32H480c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9L429.3 416H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H352c-12.9 0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9L402.7 352H352c-17.7 0-32-14.3-32-32zM416 32c12.1 0 23.2 6.8 28.6 17.7l64 128 16 32c7.9 15.8 1.5 35-14.3 42.9s-35 1.5-42.9-14.3L460.2 224H371.8l-7.2 14.3c-7.9 15.8-27.1 22.2-42.9 14.3s-22.2-27.1-14.3-42.9l16-32 64-128C392.8 38.8 403.9 32 416 32zM395.8 176h40.4L416 135.6 395.8 176z"/></svg>
                                        </div>
                                        <div class="sort-btn desc-btn" data-index={index} onclick={handleDescending}>
                                            <svg xmlns="http://www.w3.org/2000/svg"  fill="#00AEFF"  data-index={index} height="24" width="27" viewBox="0 0 576 512"><path data-index={index} d="M183.6 469.6C177.5 476.2 169 480 160 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L128 365.7V64c0-17.7 14.3-32 32-32s32 14.3 32 32V365.7l32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 64c0-17.7 14.3-32 32-32H480c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9L429.3 160H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H352c-12.9 0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9L402.7 96H352c-17.7 0-32-14.3-32-32zm96 192c12.1 0 23.2 6.8 28.6 17.7l64 128 16 32c7.9 15.8 1.5 35-14.3 42.9s-35 1.5-42.9-14.3L460.2 448H371.8l-7.2 14.3c-7.9 15.8-27.1 22.2-42.9 14.3s-22.2-27.1-14.3-42.9l16-32 64-128c5.4-10.8 16.5-17.7 28.6-17.7zM395.8 400h40.4L416 359.6 395.8 400z"/></svg>                               
                                        </div>
                                    </div>
                                    <div class="delete-btn" data-index={index} onclick={removeSort}>
                                        <svg xmlns="http://www.w3.org/2000/svg" data-index={index} width="21" height="21" viewBox="0 0 12 16" fill="black">
                                            <path data-index={index} transform="scale (-1, 1)" transform-origin="center" d="M10.7523 5.84348C10.515 5.84348 10.3183 6.0401 10.3183 6.2774V13.8372C10.3183 14.5491 9.73525 15.1322 9.02335 15.1322H3.8366C3.1247 15.1322 2.54161 14.5491 2.54161 13.8372V6.2774C2.54161 6.0401 2.34499 5.84348 2.10769 5.84348C1.87039 5.84348 1.67377 6.0401 1.67377 6.2774V13.8372C1.67377 15.0305 2.64331 16 3.8366 16H9.02335C10.2166 16 11.1862 15.0305 11.1862 13.8372V6.2774C11.1862 6.0401 10.9963 5.84348 10.7523 5.84348Z M4.70446 13.8372V7.78936C4.70446 7.55206 4.50783 7.35544 4.27053 7.35544C4.03323 7.35544 3.83661 7.55206 3.83661 7.78936V13.8372C3.83661 14.0745 4.03323 14.2711 4.27053 14.2711C4.50783 14.2711 4.70446 14.0745 4.70446 13.8372Z M6.86785 13.4817V7.43392C6.86785 7.19662 6.67123 7 6.43392 7C6.19662 7 6 7.19662 6 7.43392V13.4817C6 13.719 6.19662 13.9157 6.43392 13.9157C6.67801 13.9157 6.86785 13.719 6.86785 13.4817Z M9.02336 13.8372V7.78936C9.02336 7.55206 8.82674 7.35544 8.58944 7.35544C8.35214 7.35544 8.15552 7.55206 8.15552 7.78936V13.8372C8.15552 14.0745 8.35214 14.2711 8.58944 14.2711C8.83352 14.2711 9.02336 14.0745 9.02336 13.8372Z M11.9862 2.35853L11.776 1.5178C11.5997 0.826237 10.8946 0.399094 10.2031 0.575375L6.84693 1.4161L6.73844 0.982179C6.56216 0.290613 5.85704 -0.136531 5.16547 0.0397509C4.47391 0.216032 4.04676 0.921158 4.22305 1.61272L4.33153 2.04665L0.982179 2.88737C0.290613 3.06366 -0.136531 3.76878 0.0397509 4.46035L0.249933 5.30107C0.310953 5.5316 0.541475 5.67398 0.778777 5.61296L11.6811 2.88737C11.9048 2.82635 12.0472 2.58905 11.9862 2.35853ZM5.38243 0.880478C5.61296 0.826237 5.85026 0.961838 5.9045 1.19236L6.01298 1.62628L5.17225 1.83647L5.06377 1.40254C5.00953 1.17202 5.14513 0.934718 5.38243 0.880478ZM0.982179 4.66375L0.873698 4.24338C0.819457 4.01286 0.955058 3.77556 1.18558 3.72132L10.4065 1.4161C10.637 1.36186 10.8743 1.49746 10.9285 1.72798L11.037 2.14835L0.982179 4.66375Z"/>
                                        </svg> 
                                    </div>
                                </div>
                            </template>
                            <div class="add-btn" data-index={index} onclick={addSort}>
                                <svg xmlns="http://www.w3.org/2000/svg" width="13" height="21" viewBox="0 0 14 14" fill="black"> <path d="M13 8H8V13C8 13.55 7.55 14 7 14C6.45 14 6 13.55 6 13V8H1C0.45 8 0 7.55 0 7C0 6.45 0.45 6 1 6H6V1C6 0.45 6.45 0 7 0C7.55 0 8 0.45 8 1V6H13C13.55 6 14 6.45 14 7C14 7.55 13.55 8 13 8Z"/> </svg>
                            </div>
                        </div>
                    </div>
                    <div class="limit-main-div">
                        <div class="title-div title-with-btn">
                            <div class="title-text">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="#fff" viewBox="0 0 16 16" height="15" width="20"><path d="M11.46 0.146A0.5 0.5 0 0 0 11.107 0H4.893a0.5 0.5 0 0 0 -0.353 0.146L0.146 4.54A0.5 0.5 0 0 0 0 4.893v6.214a0.5 0.5 0 0 0 0.146 0.353l4.394 4.394a0.5 0.5 0 0 0 0.353 0.146h6.214a0.5 0.5 0 0 0 0.353 -0.146l4.394 -4.394a0.5 0.5 0 0 0 0.146 -0.353V4.893a0.5 0.5 0 0 0 -0.146 -0.353zM8 4c0.535 0 0.954 0.462 0.9 0.995l-0.35 3.507a0.552 0.552 0 0 1 -1.1 0L7.1 4.995A0.905 0.905 0 0 1 8 4m0.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0 -2" stroke-width="1"></path></svg>
                                Limit
                            </div>
                            <button data-name="limit" class="clear-btn" onclick={handleClear}>
                                <svg xmlns="http://www.w3.org/2000/svg" data-name="limit" viewBox="-0.5 -0.5 20 20" stroke="#00AEFF" stroke-linecap="round"><path data-name="limit" d="M17.48 1.52L1.52 17.48 M1.52 1.52L17.48 17.48" stroke-width="2"></path></svg>
                                Clear
                            </button>
                            <button data-name="limit" class="reset-btn" onclick={handleReset} if:false={isChild}>
                                <svg xmlns="http://www.w3.org/2000/svg" data-name="limit" viewBox="0 0 24 24" fill="currentColor">
                                    <path data-name="limit" d="M12 4C9.25144 4 6.82508 5.38626 5.38443 7.5H8V9.5H2V3.5H4V5.99936C5.82381 3.57166 8.72764 2 12 2C17.5228 2 22 6.47715 22 12H20C20 7.58172 16.4183 4 12 4ZM4 12C4 16.4183 7.58172 20 12 20C14.7486 20 17.1749 18.6137 18.6156 16.5H16V14.5H22V20.5H20V18.0006C18.1762 20.4283 15.2724 22 12 22C6.47715 22 2 17.5228 2 12H4Z"></path>
                                </svg>Reset
                            </button>
                        </div>
                        <div class="limit-div">
                            <div class="limit-toggle-div">
                                <label>Set records limit</label>
                                <lightning-input
                                    class="toggle-limit"
                                    type="toggle"
                                    checked={showLimitInput}
                                    message-toggle-active=""
                                    message-toggle-inactive=""
                                    onchange={handleLimitToggleChange}
                                    title="if checked, you can change the no of records you want in CSV. By default only 50000 records at max will be there in CSV."
                                    field-level-help="if checked, you can change the no of records you want in CSV. By default only 50000 records at max will be there in CSV."
                                ></lightning-input>
                            </div>
                            <div class="limit-input-div" if:true={showLimitInput}>
                                <lightning-input 
                                    class="input-limit"
                                    type="number"
                                    value={limit}
                                    variant="label-hidden"
                                    onchange={handleLimitUpdate}
                                    onblur={handleLimitInputBlur}
                                ></lightning-input>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="btn-div">
                    <button class="cancel-button control-btn" onclick={handleClose}>
                        <svg xmlns="http://www.w3.org/2000/svg" class="true" width="15" height="15" fill="white" viewBox="0 0 520 520"><g><path d="M310 254l130-131c6-6 6-15 0-21l-20-21c-6-6-15-6-21 0L268 212a10 10 0 01-14 0L123 80c-6-6-15-6-21 0l-21 21c-6 6-6 15 0 21l131 131c4 4 4 10 0 14L80 399c-6 6-6 15 0 21l21 21c6 6 15 6 21 0l131-131a10 10 0 0114 0l131 131c6 6 15 6 21 0l21-21c6-6 6-15 0-21L310 268a10 10 0 010-14z"></path></g></svg>
                        Close
                    </button>
                    <button class="preview-button control-btn" data-type="preview" onclick={handleSave} if:false={isChild}>
                        <svg xmlns="http://www.w3.org/2000/svg" data-type="preview" class="true" viewBox="0 0 520 520" width="15" height="15" fill="white"><path d="M518 251a288 288 0 00-516 0 20 20 0 000 18 288 288 0 00516 0 20 20 0 000-18zM260 370c-61 0-110-49-110-110s49-110 110-110 110 49 110 110-49 110-110 110zm0-180c-39 0-70 31-70 70s31 70 70 70 70-31 70-70-31-70-70-70z"></path></svg>
                        Save & Preview
                    </button>
                    <button class="save-button control-btn" data-type="save" onclick={handleSave}>
                        <svg xmlns="http://www.w3.org/2000/svg" data-type="save" class={isEditTabChanged} width="15" height="15" fill="white" viewBox="0 0 520 520"><g><path d="M371 40v136c0 10-8 19-19 19H139c-10 0-19-8-19-19V40H80a40 40 0 00-40 40v360a40 40 0 0040 40h360a40 40 0 0040-40V112l-72-72zm70 381c0 10-8 19-19 19H99c-10 0-19-8-19-19V254c0-10 8-19 19-19h323c10 0 19 8 19 19zM248 136c0 10 8 19 19 19h46c10 0 19-8 19-19V40h-83z"></path></g></svg>
                        {saveBtnLabel}
                    </button>
                </div>
            </div>
        </div>

        <div class="basic-detail-div override-css-from-js" if:true={showBasicDetailTab}>
            <div class="title-div">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-0.5 -0.5 16 16" fill="#fff" stroke-width="1" height="20" width="30"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.7461250000000001 1.0111249999999998C0.885 1.8721875 0.885 3.258125 0.885 6.029999999999999V8.97C0.885 11.7418125 0.885 13.127812500000001 1.7461250000000001 13.988875C2.6071875 14.850000000000001 3.993125 14.850000000000001 6.765 14.850000000000001H8.235C11.0068125 14.850000000000001 12.392812499999998 14.850000000000001 13.253874999999999 13.988875C14.115 13.127812500000001 14.115 11.7418125 14.115 8.97V6.029999999999999C14.115 3.258125 14.115 1.8721875 13.253874999999999 1.0111249999999998C12.392812499999998 0.15 11.0068125 0.15 8.235 0.15H6.765C3.993125 0.15 2.6071875 0.15 1.7461250000000001 1.0111249999999998ZM4.00875 4.5600000000000005C4.00875 4.2555625 4.2555625 4.00875 4.5600000000000005 4.00875H10.440000000000001C10.7444375 4.00875 10.991249999999999 4.2555625 10.991249999999999 4.5600000000000005S10.7444375 5.11125 10.440000000000001 5.11125H4.5600000000000005C4.2555625 5.11125 4.00875 4.8644375 4.00875 4.5600000000000005ZM4.00875 7.5C4.00875 7.1955625 4.2555625 6.94875 4.5600000000000005 6.94875H10.440000000000001C10.7444375 6.94875 10.991249999999999 7.1955625 10.991249999999999 7.5S10.7444375 8.05125 10.440000000000001 8.05125H4.5600000000000005C4.2555625 8.05125 4.00875 7.8044375 4.00875 7.5ZM4.5600000000000005 9.88875C4.2555625 9.88875 4.00875 10.135562499999999 4.00875 10.440000000000001S4.2555625 10.991249999999999 4.5600000000000005 10.991249999999999H8.235C8.5394375 10.991249999999999 8.786249999999999 10.7444375 8.786249999999999 10.440000000000001S8.5394375 9.88875 8.235 9.88875H4.5600000000000005Z"></path></svg>
                Basic Details
            </div>
            <div class="basic-main-div">
                <div class="edit-detail-div">
                    <div class="tempToggle">
                        <input class="checkBox" type="checkbox" id={newTemplateData.Id} data-name="MVDG__Template_Status__c" onchange={handleChangeStatus} checked={newTemplateData.MVDG__Template_Status__c}/>
                        <label for={newTemplateData.Id}> 
                          <div class="toggleDiv">
                            <div class="toggleBtnBg">
                              <div class="StatusText">
                                  <span>Inactive</span>
                                  <span>Active</span>
                              </div>
                            </div>
                          </div>
                        </label>
                      </div>
                    <lightning-input 
                      class="details-name-input"
                      type="text"
                      maxlength="255"
                      label="Template Name"
                      placeholder="Enter Template Name"
                      value={newTemplateData.MVDG__Template_Name__c}
                      onchange={handleTemplateNameChange}
                      pattern=".*\S.*"
                      required="true"
                    ></lightning-input>

                    <div class="List-view-div">
                        <c-custom-combobox
                            label="List View"
                            class="list-view-select custom-combobox"
                            onselect={handleListViewChange}
                            options={allListViews}
                            multiselect="false"
                            placeholder ="Select List View"
                            value ={selectedListView}
                            dropdown-position="left"
                            searchable="true"
                        ></c-custom-combobox>
                    </div>

                    <lightning-textarea 
                      class="description-edit"
                      max-length="131072" 
                      label="Description" 
                      placeholder="What this template is about?"
                      value={newTemplateData.MVDG__Description__c}
                      variant="standard"
                      onchange={handleDescriptionChange}
                    ></lightning-textarea>
                    
                    <lightning-input 
                      type="text"
                      label="Source Object"
                      value={newTemplateData.MVDG__Object_API_Name__c}
                      disabled="true"
                    ></lightning-input>
                    <lightning-input 
                      type="text"
                      label="Template Type"
                      value={newTemplateData.MVDG__Template_Type__c}
                      disabled="true"
                    ></lightning-input>

                    <lightning-input 
                      type="datetime"
                      label="Created On"
                      value={newTemplateData.CreatedDate}
                      disabled="true"
                    ></lightning-input>
                    <lightning-input 
                      type="datetime"
                      label="Last Modified On"
                      value={newTemplateData.LastModifiedDate}
                      disabled="true"
                    ></lightning-input>
                    <lightning-input 
                      type="text"
                      label="Created By"
                      value={newTemplateData.CreatedBy.Name}
                      disabled="true"
                    ></lightning-input>
                    <lightning-input 
                      type="text"
                      label="Last Modified By"
                      value={newTemplateData.LastModifiedBy.Name}
                      disabled="true"
                    ></lightning-input>
                </div>
            </div>
            <div class="btn-div basic-details-btn-div">
                <button class="cancel-button control-btn" onclick={handleClose}>
                    <svg xmlns="http://www.w3.org/2000/svg" class="true" width="15" height="15" fill="white" viewBox="0 0 520 520"><g><path d="M310 254l130-131c6-6 6-15 0-21l-20-21c-6-6-15-6-21 0L268 212a10 10 0 01-14 0L123 80c-6-6-15-6-21 0l-21 21c-6 6-6 15 0 21l131 131c4 4 4 10 0 14L80 399c-6 6-6 15 0 21l21 21c6 6 15 6 21 0l131-131a10 10 0 0114 0l131 131c6 6 15 6 21 0l21-21c6-6 6-15 0-21L310 268a10 10 0 010-14z"></path></g></svg>
                    Close
                </button>
                <button class="cancel-button control-btn" onclick={handleDetailsCancel}>
                    <svg xmlns="http://www.w3.org/2000/svg" class="true" width="15" height="15" fill="white" viewBox="0 0 24 24"><path d="M5.82843 6.99955L8.36396 9.53509L6.94975 10.9493L2 5.99955L6.94975 1.0498L8.36396 2.46402L5.82843 4.99955H13C17.4183 4.99955 21 8.58127 21 12.9996C21 17.4178 17.4183 20.9996 13 20.9996H4V18.9996H13C16.3137 18.9996 19 16.3133 19 12.9996C19 9.68584 16.3137 6.99955 13 6.99955H5.82843Z"></path></svg>
                    Cancel
                </button>
                <button class="save-button control-btn" onclick={handleDetailsSave}>
                    <svg xmlns="http://www.w3.org/2000/svg" class={isBasicTabChanged} width="15" height="15" fill="white" viewBox="0 0 520 520"><g><path d="M371 40v136c0 10-8 19-19 19H139c-10 0-19-8-19-19V40H80a40 40 0 00-40 40v360a40 40 0 0040 40h360a40 40 0 0040-40V112l-72-72zm70 381c0 10-8 19-19 19H99c-10 0-19-8-19-19V254c0-10 8-19 19-19h323c10 0 19 8 19 19zM248 136c0 10 8 19 19 19h46c10 0 19-8 19-19V40h-83z"></path></g></svg>
                    Update
                </button>
            </div>
        </div>

        <div class="defaults-div" if:true={showDefaultsTab}>
            <c-generate-document
                called-from-where="defaults"
                template-type-from-parent="CSV Template"
                template-id-from-parent={templateId}
                object-api-name={objectName}
                template-name-from-parent={existingTemplateData.MVDG__Template_Name__c}
            ></c-generate-document>
        </div>
    </div>
    <div class="preview-csv-div" if:true={showPreview}>
        <div class="slds-backdrop slds-backdrop_open"></div>
        <c-preview-c-s-v is-popup="true" template-id={templateId} object-name={objectName} onclose={closePreview}></c-preview-c-s-v>
    </div>

    <c-chat-bot></c-chat-bot>
</template>